<!doctype html>
<html xmlns:spry="http://ns.adobe.com/spry">
<head>
<meta charset="UTF-8">
<title>ACAAN Result</title>
<link href="jquery-mobile/jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>
<script src="phonegap.js"></script>
<script type="text/javascript">

/*!
* Cordova/PhoneGap 3.0.0+ LocalNotification Plugin
* Original author: Olivier Lesnicki
*/

//------------------------------------------------------------------------------
// object that we're exporting
//------------------------------------------------------------------------------
var localNotifier = module.exports;

//------------------------------------------------------------------------------
localNotifier.addNotification = function(options) {
        
    var defaults = {
                
        fireDate : new Date(new Date().getTime() + 5000),
        alertBody : "This is a local notification.",
        repeatInterval : "" ,
        soundName : "horn.caf" ,
        badge : 0 ,
        notificationId : 1 ,
        background : function(notificationId){},
        foreground : function(notificationId){}
    };
        
    if(options){
        for (var key in defaults) {
            if (typeof options[key] !== "undefined"){
            defaults[key] = options[key];
            }
        }
    }
    
    if (typeof defaults.fireDate == 'object') {
        defaults.fireDate = Math.round(defaults.fireDate.getTime()/1000);
    }
        
    cordova.exec(
        function(params) {
            window.setTimeout(function(){
                if(typeof defaults.foreground == 'function'){
                  if(params.appState == "active") {
                    defaults.foreground(params.notificationId);
                    return;
                  }
                }
                if(typeof defaults.background == 'function'){
                  if(params.appState != "active") {
                    defaults.background(params.notificationId);
                    return;
                  }
                }
            }, 1);
        },
        function(err){
          console.log("ERROR in cordova.exec");
          console.log(err);
        },
        "LocalNotification" ,
        "addNotification" ,
        [
            defaults.fireDate ,
            defaults.alertBody ,
            defaults.repeatInterval ,
            defaults.soundName ,
            defaults.notificationId
        ]
    );
                    
};

//------------------------------------------------------------------------------
localNotifier.cancelNotification = function(str, callback) {
    cordova.exec(callback, null, "LocalNotification", "cancelNotification", [str]);
};

//------------------------------------------------------------------------------
localNotifier.cancelAllNotifications = function(callback) {
    cordova.exec(callback, null, "LocalNotification", "cancelAllNotifications", []);
};






localNotifier.addNotification({
    fireDate        : Math.round(new Date().getTime()/1000 + 5),
    alertBody       : "This is a new local notification.",
    repeatInterval  : "daily",
    soundName       : "horn.caf",
    badge           : 0,
    notificationId  : 123,
    foreground      : function(notificationId){ 
        alert("Hello World! This alert was triggered by notification " + notificationId); 
    },
    background  : function(notificationId){
        alert("Hello World! This alert was triggered by notification " + notificationId);
    }           
});

</script>
<style type="text/css">
body,td,th {
	font-family: "Gill Sans", "Gill Sans MT", "Myriad Pro", "DejaVu Sans Condensed", Helvetica, Arial, sans-serif;
	font-size: 26px;
	color: #333;
}
body {
	background-color: #000;
	margin: 0px;
	padding: 0px;	
	
}
#background_image {
	margin: 0px;
	padding: 0px;
	width: 100%;

}
.imagesize {
	width: 100%;
	height: auto;
}
#position {
	font-family: "Gill Sans", "Gill Sans MT", "Myriad Pro", "DejaVu Sans Condensed", Helvetica, Arial, sans-serif;
	font-size: 12px;
	position: absolute;
	font-style: normal;
	top: 66px;
	left: 19px;
	color: #FFF;
	text-align: right;
}
#card {
	font-family: "Gill Sans", "Gill Sans MT", "Myriad Pro", "DejaVu Sans Condensed", Helvetica, Arial, sans-serif;
	font-size: 12px;
	position: absolute;
	font-style: normal;
	top: 66px;
	left: 102px;
	color: #FFF;
	height: 2px;
	text-align: center;
}

</style>
<script src="SpryAssets/xpath.js" type="text/javascript"></script>
<script src="SpryAssets/SpryData.js" type="text/javascript"></script>
<script type="text/javascript">
var ds1 = new Spry.Data.XMLDataSet("http://www.cardstats.co.uk/push_data.php?xml=1", "recordset/record", {sortOnLoad: "result_id", sortOrderOnLoad: "descending", useCache: false, loadInterval: 2000});
</script>
<meta content='initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link href="http://www.cardstats.co.uk/ios_icons/apple-touch-icon.png" rel="apple-touch-icon" />
<link href="http://www.cardstats.co.uk/ios_icons/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76" />
<link href="http://www.cardstats.co.uk/ios_icons/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120" />
<link href="http://www.cardstats.co.uk/ios_icons/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152" />
</head>

<body onload="doSort(), setTimeout(function() {window.scrollTo(0, 1)}, 100);">
<div id="background_image"><img class="imagesize" src="background.png" width="640" height="1136" /></div>
<div spry:region="ds1" id="position">
Number {position}</div>

<div spry:region="ds1" id="card">
Card {card}</div>


</body>
</html>
